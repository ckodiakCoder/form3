<div class="form-container">
  <form [formGroup]="formGroup" (ngSubmit)="onSubmit()">
    <h2>Personal Details</h2>
    <p-floatLabel>
      <input pInputText id="name" formControlName="name" placeholder="Your Name" />
      <label for="name">Enter your name</label>
    </p-floatLabel>
    <div class="error" *ngIf="formGroup.get('name')?.touched && formGroup.get('name')?.invalid">
      <small *ngIf="formGroup.get('name')?.errors?.['required']">Name is required.</small>
      <small *ngIf="formGroup.get('name')?.errors?.['minlength']">At least 2 characters.</small>
    </div>
    <br />
    <p-floatLabel>
      <input pInputText id="email" formControlName="email" placeholder="Your Email" />
      <label for="email">Enter your email</label>
    </p-floatLabel>
    <div class="error" *ngIf="formGroup.get('email')?.touched && formGroup.get('email')?.invalid">
      <small *ngIf="formGroup.get('email')?.errors?.['required']">Email is required.</small>
      <small *ngIf="formGroup.get('email')?.errors?.['email']">Enter a valid email.</small>
    </div>
    <br />
    <h3>Date of Birth</h3>
    <p-calendar 
      formControlName="date" 
      placeholder="Pick your date of birth"
      [minDate]="minDate"
      [maxDate]="maxDate"
      showIcon="true"
    ></p-calendar>
    <div class="error" *ngIf="formGroup.get('date')?.touched && formGroup.get('date')?.invalid">
      <small>Date of birth is required.</small>
    </div>
    <br />
    <h3>Select Your City</h3>
    <p-cascadeSelect
      formControlName="selectedCity"
      [options]="countries"
      optionLabel="cname"
      optionGroupLabel="name"
      [optionGroupChildren]="['states', 'cities']"
      [style]="{ minWidth: '14rem' }"
      placeholder="Select your city"
    ></p-cascadeSelect>
    <div class="error" *ngIf="formGroup.get('selectedCity')?.touched && formGroup.get('selectedCity')?.invalid">
      <small>City selection is required.</small>
    </div>
    <br />
    <h3>Marital Status</h3>
    <label for="checked">Married?</label>
    <p-inputSwitch formControlName="checked" id="checked" />
    <br />
    <h3>Highest Qualification</h3>
    <p-dropdown
      formControlName="selectedheightestQualification"
      [options]="heightestQualifications"
      optionLabel="name"
      placeholder="Select your highest qualification"
    ></p-dropdown>
    <div class="error" *ngIf="formGroup.get('selectedheightestQualification')?.touched && formGroup.get('selectedheightestQualification')?.invalid">
      <small>Qualification is required.</small>
    </div>
    <br />
    <h3>Gender</h3>
    <div class="flex flex-column gap-3">
      <div *ngFor="let gender of genders" class="field-checkbox">
        <p-radioButton
          [inputId]="gender.key"
          name="gender"
          [value]="gender.key"
          formControlName="gender">
        </p-radioButton>
        <label [for]="gender.key" class="ml-2">
          {{ gender.name }}
        </label>
      </div>
    </div>
    <div class="error" *ngIf="formGroup.get('gender')?.touched && formGroup.get('gender')?.invalid">
      <small>Gender is required.</small>
    </div>
    <br />
    <div class="flex align-items-center gap-1">
      <p-checkbox 
        formControlName="city" 
        value="New York" 
        inputId="ny" />
      <label for="ny">Are you sure to submit?</label>
    </div>
    <br />
    <p-button label="Submit" type="submit" styleClass="p-button-lg" [disabled]="formGroup.invalid"></p-button>
  </form>
  <!-- Thank You Modal -->
  <div class="modal-backdrop" *ngIf="showThankYou">
    <div class="modal-content">
      <h2>Thank You!</h2>
      <p>Your submission has been received.</p>
      <button class="modal-btn" (click)="closeThankYou()">Close</button>
    </div>
  </div>
</div>
